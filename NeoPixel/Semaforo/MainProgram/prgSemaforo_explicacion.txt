Línea 1: Docstring que describe la simulación de cruce vial con 3 semáforos NeoPixel.
Línea 2: Línea en blanco para separar el título del resto de la descripción.
Línea 3: Explica que cada semáforo está compuesto por 3 LEDs NeoPixel.
Línea 4: Detalla el comportamiento del color verde: solo 1 LED encendido.
Línea 5: Detalla el comportamiento del amarillo: parpadea cada 500 ms durante 3 s y usa 1 LED.
Línea 6: Detalla el comportamiento del rojo: los 3 LEDs en rojo fijo.
Línea 7: Línea en blanco para separar párrafos en el docstring.
Línea 8: Describe el parpadeo inicial en rojo por 10 s con ciclos on/off de 500 ms.
Línea 9: Cierra el docstring.
Línea 10: Línea en blanco para separar importaciones.
Línea 11: Importa el módulo time para usar retardos.
Línea 12: Línea en blanco para separar importaciones.
Línea 13: Importa la clase Neopixel desde el archivo neopixel.py.
Línea 14: Línea en blanco para separar constantes.
Línea 15: Comentario de configuración general del NeoPixel según hardware.
Línea 16: Define el pin GPIO usado por la tira NeoPixel.
Línea 17: Define el state machine PIO a usar.
Línea 18: Define el número de semáforos en el cruce.
Línea 19: Define el número de LEDs por cada semáforo.
Línea 20: Calcula el total de LEDs (semaforos * LEDs por semáforo).
Línea 21: Línea en blanco para separar sección de colores.
Línea 22: Comentario que indica la sección de colores RGB.
Línea 23: Define el color rojo en RGB.
Línea 24: Define el color amarillo en RGB.
Línea 25: Define el color verde en RGB.
Línea 26: Define el color apagado en RGB.
Línea 27: Línea en blanco para separar sección de tiempos.
Línea 28: Comentario que indica la sección de tiempos.
Línea 29: Define la duración del verde en segundos.
Línea 30: Define la duración del amarillo en segundos.
Línea 31: Define el periodo de parpadeo en segundos (500 ms).
Línea 32: Define la duración del parpadeo rojo inicial en segundos.
Línea 33: Línea en blanco para separar clase.
Línea 34: Línea en blanco para separar clase.
Línea 35: Declara la clase SemaforoController.
Línea 36: Docstring de la clase indicando que controla 3 semáforos.
Línea 37: Línea en blanco para separar métodos.
Línea 38: Define el constructor que recibe el objeto Neopixel.
Línea 39: Guarda la referencia al objeto Neopixel en la instancia.
Línea 40: Línea en blanco para separar métodos privados.
Línea 41: Define un método privado para calcular el índice base de un semáforo.
Línea 42: Devuelve el índice base multiplicando por LEDs por semáforo.
Línea 43: Línea en blanco para separar métodos.
Línea 44: Define un método privado para apagar todos los LEDs de un semáforo.
Línea 45: Calcula el índice base del semáforo a apagar.
Línea 46: Recorre los 3 LEDs del semáforo.
Línea 47: Asigna el color apagado a cada LED del semáforo.
Línea 48: Línea en blanco para separar métodos.
Línea 49: Define un método para poner un semáforo en rojo.
Línea 50: Calcula el índice base del semáforo.
Línea 51: Recorre los 3 LEDs del semáforo.
Línea 52: Asigna el color rojo a cada LED del semáforo.
Línea 53: Línea en blanco para separar métodos.
Línea 54: Define un método para poner un semáforo en verde.
Línea 55: Apaga primero los LEDs del semáforo.
Línea 56: Calcula el índice base del semáforo.
Línea 57: Enciende solo el primer LED en verde.
Línea 58: Línea en blanco para separar métodos.
Línea 59: Define un método para poner un semáforo en amarillo.
Línea 60: Apaga primero los LEDs del semáforo.
Línea 61: Calcula el índice base del semáforo.
Línea 62: Enciende solo el primer LED en amarillo.
Línea 63: Línea en blanco para separar métodos.
Línea 64: Define un método para actualizar la tira con show().
Línea 65: Llama a neopixel.show() para enviar datos al hardware.
Línea 66: Línea en blanco para separar métodos.
Línea 67: Define el método de parpadeo inicial en rojo.
Línea 68: Docstring del método indicando la duración de 10 s.
Línea 69: Calcula el número de ciclos de parpadeo.
Línea 70: Itera por cada ciclo de parpadeo.
Línea 71: Alterna entre rojo y apagado según el ciclo.
Línea 72: Recorre los semáforos.
Línea 73: Calcula el índice base del semáforo.
Línea 74: Recorre los LEDs del semáforo.
Línea 75: Asigna el color correspondiente (rojo o apagado).
Línea 76: Actualiza la tira con show().
Línea 77: Espera el tiempo de parpadeo (500 ms).
Línea 78: Línea en blanco para separar métodos.
Línea 79: Define el método principal del ciclo de semáforos.
Línea 80: Docstring indicando que el ciclo es continuo.
Línea 81: Inicia un bucle infinito.
Línea 82: Itera cada semáforo como el activo.
Línea 83: Recorre todos los semáforos para asignar colores.
Línea 84: Comprueba si el semáforo es el activo.
Línea 85: Si es el activo, lo pone en verde.
Línea 86: Si no es el activo, sigue la rama else.
Línea 87: Pone el semáforo en rojo.
Línea 88: Actualiza la tira con show().
Línea 89: Espera el tiempo de verde (10 s).
Línea 90: Línea en blanco para separar fase amarilla.
Línea 91: Calcula cuántos parpadeos caben en 3 s.
Línea 92: Itera cada parpadeo amarillo.
Línea 93: Recorre todos los semáforos.
Línea 94: Comprueba si el semáforo es el activo.
Línea 95: Alterna el parpadeo amarillo en el activo.
Línea 96: Enciende el amarillo en el activo en ciclos pares.
Línea 97: Si el ciclo es impar, sigue la rama else.
Línea 98: Apaga los LEDs del semáforo activo.
Línea 99: Si no es el activo, sigue la rama else.
Línea 100: Mantiene los semáforos no activos en rojo.
Línea 101: Actualiza la tira con show().
Línea 102: Espera el tiempo de parpadeo (500 ms).
Línea 103: Línea en blanco para separar funciones.
Línea 104: Línea en blanco para separar funciones.
Línea 105: Define la función principal main().
Línea 106: Crea la instancia de Neopixel con la configuración.
Línea 107: Crea el controlador de semáforos.
Línea 108: Ejecuta el parpadeo rojo inicial.
Línea 109: Inicia el ciclo continuo de semáforos.
Línea 110: Línea en blanco para separar bloque principal.
Línea 111: Línea en blanco para separar bloque principal.
Línea 112: Comprueba si el archivo se ejecuta como script principal.
Línea 113: Llama a main() para iniciar el programa.
